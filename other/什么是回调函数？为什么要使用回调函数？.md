# 什么是回调函数？为什么要使用回调函数？

函数的概念很好理解，就是把某个任务独立出来，封装在一起，然后给它取个名字，它可以有参数和返回值。

那么，回调函数是个什么鬼呢？它和函数到底有何异同？既然已经有了函数，为啥还非要生出个回调函数来？

想必，小伙伴们在刚碰到这个概念的时候，都会被这些问题困扰。

首先，回调函数也是函数，就像白马也是马一样。它具有函数的所有特征，它可以有参数和返回值。其实，单独给出一个函数是看不出来它是不是回调函数的。回调函数区别于普通函数在于它的调用方式。只有当某个函数（更确切的说是函数的指针）被作为参数，被另一个函数调用时，它才是回调函数。就像给你一碗饭，你并不能说它是中饭还是晚饭一样，只有当你在某个时候把它吃掉了你才明确它是中饭还是晚饭（这个比喻貌似有点挫。领会精神就好，哈哈）。

那么问题来了，为什么我们要把函数作为参数来调用呢，直接在函数体里面调用不好吗？这个问题问的好。在这个意义上，“把函数做成参数”和“把变量做成参数”目的是一致的，就是以不变应万变。形参是不变的，而实参是变的。唯一不同的是，普通的实参可以由计算机程序自动产生，而函数这种参数计算机程序是无法自己写出来的，因为函数本身就是程序（要是程序可以写程序的话那就是超级人工智能了），它必须由人来写。所以对于回调函数这种参数而言，它的“变”在于人有变或者人的需求有变。

虽然说形参不变，实参可变，以不变应万变。但是作为实参有一点还是不能变的，那就是实参的数据类型不能变。比如void foo(int i)这个函数里的参数i可以取1也可以取2，但是它必须是整型的。同样的，回调函数这种参数的类型也不能变。而函数的类型是由函数的参数类型和返回值类型决定的。比如前面提到的排序算法里面，isShorter这个回调函数的参数必须是两个const string类型，返回值必须是bool类型。所以在写回调函数时还是不能太任性，必须要查看一下调用该回调函数的函数的声明。

总之，所谓回调函数就是把函数当作参数使用。目的是使程序更加普适（正如活字印刷，把可能会“变”的字一个个分离开来，这样就可以任意组合，重复利用）。一般情况下，一个人的小规模程序用不着这种普适性，除非你想把它做成工具箱（比如游戏引擎），供他人使用。